{"version":3,"file":"static/js/697-legacy.4dad484a.js","mappings":"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","sources":["webpack://vue_shop/./src/components/power/Roles.vue?ce66","webpack://vue_shop/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://vue_shop/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://vue_shop/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://vue_shop/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://vue_shop/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://vue_shop/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://vue_shop/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://vue_shop/src/components/power/Roles.vue","webpack://vue_shop/./src/components/power/Roles.vue?0a6f","webpack://vue_shop/./src/components/power/Roles.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Breadcrumb',{attrs:{\"name1\":\"权限管理\",\"name2\":\"角色列表\"}}),_c('el-card',[_c('el-row',[_c('el-col',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.rolelist,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.children),function(item1,i1){return _c('el-row',{key:item1.id,class:['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']},[_c('el-col',{attrs:{\"span\":5}},[_c('el-tag',{attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item1.id)}}},[_vm._v(_vm._s(item1.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":19}},_vm._l((item1.children),function(item2,i2){return _c('el-row',{key:item2.id,class:[i2 === 0 ? '' : 'bdtop', 'vcenter']},[_c('el-col',{attrs:{\"span\":6}},[_c('el-tag',{attrs:{\"type\":\"success\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item2.id)}}},[_vm._v(_vm._s(item2.authName))]),_c('i',{staticClass:\"el-icon-caret-right\"})],1),_c('el-col',{attrs:{\"span\":18}},_vm._l((item2.children),function(item3){return _c('el-tag',{key:item3.id,attrs:{\"type\":\"warning\",\"closable\":\"\"},on:{\"close\":function($event){return _vm.removeRightById(scope.row, item3.id)}}},[_vm._v(_vm._s(item3.authName))])}),1)],1)}),1)],1)})}}])}),_c('el-table-column',{attrs:{\"label\":\"#\",\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}}),_c('el-table-column',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.rolesdelete(scope.row.id)}}},[_vm._v(\"删除\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"icon\":\"el-icon-setting\"},on:{\"click\":function($event){return _vm.showSetRightDialog(scope.row)}}},[_vm._v(\"分配权限\")])]}}])})],1)],1),_c('el-dialog',{attrs:{\"title\":\"添加角色\",\"visible\":_vm.addDialogVisible},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDislogClosed}},[_c('el-form',{ref:\"addRolesForm\",attrs:{\"model\":_vm.addRolesForm,\"rules\":_vm.addFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.addRolesForm.roleName),callback:function ($$v) {_vm.$set(_vm.addRolesForm, \"roleName\", $$v)},expression:\"addRolesForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}},[_c('el-input',{model:{value:(_vm.addRolesForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.addRolesForm, \"roleDesc\", $$v)},expression:\"addRolesForm.roleDesc\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRolesUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改角色\",\"visible\":_vm.editDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event}}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editRolesForm,\"rules\":_vm.editFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"roleName\"}},[_c('el-input',{model:{value:(_vm.editRolesForm.roleName),callback:function ($$v) {_vm.$set(_vm.editRolesForm, \"roleName\", $$v)},expression:\"editRolesForm.roleName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"角色描述\",\"prop\":\"roleDesc\"}},[_c('el-input',{model:{value:(_vm.editRolesForm.roleDesc),callback:function ($$v) {_vm.$set(_vm.editRolesForm, \"roleDesc\", $$v)},expression:\"editRolesForm.roleDesc\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editFormInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.setRightDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRightDialogVisible=$event},\"close\":_vm.setRightDialogClosed}},[_c('el-tree',{ref:\"treeRef\",attrs:{\"data\":_vm.rightslist,\"props\":_vm.treeProps,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expand-all\":\"\",\"default-checked-keys\":_vm.defKeys}}),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRightDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.allotRights}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <Breadcrumb name1=\"权限管理\" name2=\"角色列表\" />\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 添加角色按钮区域 -->\r\n      <el-row>\r\n        <el-col>\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\"\r\n            >添加用户</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 角色列表区域 -->\r\n      <el-table :data=\"rolelist\" border stripe>\r\n        <!-- 展开列 -->\r\n        <el-table-column type=\"expand\">\r\n          <template v-slot=\"scope\">\r\n            <el-row\r\n              :class=\"['bdbottom', i1 === 0 ? 'bdtop' : '', 'vcenter']\"\r\n              v-for=\"(item1, i1) in scope.row.children\"\r\n              :key=\"item1.id\"\r\n            >\r\n              <!-- 渲染一级权限 -->\r\n              <el-col :span=\"5\">\r\n                <el-tag closable\r\n                      @close=\"removeRightById(scope.row, item1.id)\">{{ item1.authName }}</el-tag>\r\n                <i class=\"el-icon-caret-right\"></i>\r\n              </el-col>\r\n              <!-- 渲染二级和三级权限 -->\r\n              <el-col :span=\"19\">\r\n                <!-- 通过 for 循环 嵌套渲染二级权限 -->\r\n                <el-row\r\n                  :class=\"[i2 === 0 ? '' : 'bdtop', 'vcenter']\"\r\n                  v-for=\"(item2, i2) in item1.children\"\r\n                  :key=\"item2.id\"\r\n                >\r\n                  <el-col :span=\"6\">\r\n                    <el-tag type=\"success\" closable\r\n                      @close=\"removeRightById(scope.row, item2.id)\">{{ item2.authName }}</el-tag>\r\n                    <i class=\"el-icon-caret-right\"></i>\r\n                  </el-col>\r\n                  <!-- 渲染三级权限 -->\r\n                  <el-col :span=\"18\">\r\n                    <el-tag\r\n                      type=\"warning\"\r\n                      v-for=\"item3 in item2.children\"\r\n                      :key=\"item3.id\"\r\n                      closable\r\n                      @close=\"removeRightById(scope.row, item3.id)\"\r\n                      >{{ item3.authName }}</el-tag\r\n                    >\r\n                  </el-col>\r\n                </el-row>\r\n              </el-col>\r\n            </el-row>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- 索引列 -->\r\n        <el-table-column label=\"#\" type=\"index\"></el-table-column>\r\n        <el-table-column label=\"角色名称\" prop=\"roleName\"></el-table-column>\r\n        <el-table-column label=\"角色描述\" prop=\"roleDesc\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"300px\">\r\n          <template v-slot=\"scope\">\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              @click=\"showEditDialog(scope.row.id)\"\r\n              >编辑</el-button\r\n            >\r\n            <el-button\r\n              size=\"mini\"\r\n              type=\"danger\"\r\n              @click=\"rolesdelete(scope.row.id)\"\r\n              icon=\"el-icon-delete\"\r\n              >删除</el-button\r\n            >\r\n            <el-button size=\"mini\" type=\"warning\" icon=\"el-icon-setting\"\r\n              @click=\"showSetRightDialog(scope.row)\">分配权限</el-button\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <!-- 添加角色对话框 -->\r\n    <el-dialog\r\n      title=\"添加角色\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      @close=\"addDislogClosed\"\r\n    >\r\n      <el-form\r\n        :model=\"addRolesForm\"\r\n        :rules=\"addFormRules\"\r\n        ref=\"addRolesForm\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input v-model=\"addRolesForm.roleName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n          <el-input v-model=\"addRolesForm.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addRolesUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 编辑对话框 -->\r\n    <el-dialog title=\"修改角色\" :visible.sync=\"editDialogVisible\" width=\"30%\">\r\n      <el-form\r\n        :model=\"editRolesForm\"\r\n        :rules=\"editFormRules\"\r\n        ref=\"editFormRef\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n          <el-input v-model=\"editRolesForm.roleName\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\" prop=\"roleDesc\">\r\n          <el-input v-model=\"editRolesForm.roleDesc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editFormInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配权限的对话框 -->\r\n    <el-dialog\r\n      title=\"提示\"\r\n      :visible.sync=\"setRightDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"setRightDialogClosed\">\r\n      <!-- 树形控件 -->\r\n      <el-tree :data=\"rightslist\" :props=\"treeProps\" show-checkbox node-key=\"id\" default-expand-all :default-checked-keys=\"defKeys\" ref=\"treeRef\"></el-tree>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRightDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"allotRights\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 所有角色的列表\r\n      rolelist: [],\r\n      // 所有权限的数据\r\n      rightsList: [],\r\n      // 添加角色对话框的显示和隐藏\r\n      addDialogVisible: false,\r\n      addFormRules: {\r\n        roleName: [\r\n          { required: true, message: \"请输入角色名字\", trigger: \"blur\" },\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: \"输入的范围是 2 ~ 10 为字符\",\r\n            triggetr: \"nlur\",\r\n          },\r\n        ],\r\n        roleDesc: [\r\n          { required: true, message: \"请输入角色描述\", trigger: \"blur\" },\r\n          {\r\n            min: 3,\r\n            max: 20,\r\n            message: \"输入的范围是 3 ~ 20 为字符\",\r\n            triggetr: \"nlur\",\r\n          },\r\n        ],\r\n      },\r\n      editFormRules: {\r\n        roleName: [\r\n          { required: true, message: \"请输入角色名字\", trigger: \"blur\" },\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: \"输入的范围是 2 ~ 10 为字符\",\r\n            triggetr: \"nlur\",\r\n          },\r\n        ],\r\n        roleDesc: [\r\n          { required: true, message: \"请输入角色描述\", trigger: \"blur\" },\r\n          {\r\n            min: 3,\r\n            max: 20,\r\n            message: \"输入的范围是 3 ~ 20 为字符\",\r\n            triggetr: \"nlur\",\r\n          },\r\n        ],\r\n      },\r\n      // 编辑对话框的显示和隐藏\r\n      editDialogVisible: false,\r\n      // 分配权限对话框的显示和隐藏\r\n      SetRightDialogVisible: false,\r\n      addRolesForm: {\r\n        roleName: \"\",\r\n        roleDesc: \"\",\r\n      },\r\n      editRolesForm: {},\r\n      // 树形控件的绑定对象\r\n      treeProps: {\r\n        children: \"children\",\r\n        label: \"authName\",\r\n      },\r\n      // 树形控件 -> 默认选中的节点id值数组\r\n      defKeys: [],\r\n      // 当前即将分配权限的角色的ID\r\n      rolesId: \"\",\r\n      // 控制分配权限对话框的显示与隐藏\r\n      setRightDialogVisible: false,\r\n      // 所有权限的数据\r\n      rightslist: [],\r\n      // 树形控件的属性绑定对象\r\n      treeProps: {\r\n        label: 'authName',\r\n        children: 'children'\r\n      },\r\n      // 默认选中的节点Id值数组\r\n      defKeys: [],\r\n      // 当前即将分配角色的id\r\n      roleId: '',\r\n    };\r\n  },\r\n  created() {\r\n    this.getRolesList();\r\n  },\r\n  methods: {\r\n    // 获取所有角色的列表\r\n    async getRolesList() {\r\n      const { data: res } = await this.$http.get(\"roles\");\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取角色列表失败!\");\r\n      }\r\n      this.rolelist = res.data;\r\n      // console.log(this.rolelist);\r\n    },\r\n    // 添加角色\r\n    addRolesUser() {\r\n      this.$refs.addRolesForm.validate(async (valid) => {\r\n        if (!valid) return;\r\n        const { data: res } = await this.$http.post(\"roles\", this.addRolesForm);\r\n        console.log(res);\r\n        if (res.meta.status !== 201) {\r\n          return this.$message.error(\"添加角色失败!\");\r\n        }\r\n        this.$message.success(\"添加角色成功!\");\r\n        this.getRolesList();\r\n        this.addDialogVisible = false;\r\n      });\r\n      // console.log(this.addRolesForm)\r\n    },\r\n    // 清空添加角色对话框\r\n    addDislogClosed() {\r\n      this.$refs.addRolesForm.resetFields();\r\n    },\r\n    // 删除角色\r\n    async rolesdelete(id) {\r\n      const confirmRusult = await this.$confirm(\r\n        \"此操作将永久删除该角色, 是否继续?\",\r\n        \"删除角色\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n      // 没有使用await\r\n      if (confirmRusult !== \"confirm\") {\r\n        return this.$message.info(\"已取消该删除操作\");\r\n      }\r\n      this.$http.delete(\"roles/\" + id).then((res) => {\r\n        const { data: response } = res;\r\n        // console.log(response)\r\n        if (response.meta.status !== 200) {\r\n          return this.$message.error(\"该用户删除失败\");\r\n        }\r\n        this.$message.success(\"该用户已经删除\");\r\n        this.getRolesList();\r\n      });\r\n    },\r\n    // 得到修改用户的信息\r\n    async showEditDialog(id) {\r\n      const { data: res } = await this.$http.get(\"roles/\" + id);\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"查询角色失败!\");\r\n      }\r\n      this.editRolesForm = res.data;\r\n      console.log(this.editRolesForm);\r\n      this.editDialogVisible = true;\r\n    },\r\n    // 提交修改用户的信息\r\n    editFormInfo() {\r\n      this.$refs.editFormRef.validate((valid) => {\r\n        if (!valid) return;\r\n        this.$http\r\n          .put(\"roles/\" + this.editRolesForm.roleId, {\r\n            roleName: this.editRolesForm.roleName,\r\n            roleDesc: this.editRolesForm.roleDesc,\r\n          })\r\n          .then((res) => {\r\n            if (res.data.meta.status !== 200) {\r\n              return this.$message.error(\"修改角色失败!\");\r\n            }\r\n            this.$message.success(\"修改角色成功!\");\r\n            this.getRolesList();\r\n          });\r\n        this.editDialogVisible = false;\r\n      });\r\n    },\r\n    // 根据id删除对应的权限\r\n    async removeRightById(role, rightId) {\r\n      // 弹框提示用户是否要删除\r\n      const confirmResult = await this.$confirm(\r\n        \"此操作将永久删除该文件, 是否继续?\",\r\n        \"提示\",\r\n        {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        }\r\n      ).catch((err) => err);\r\n      if (confirmResult !== \"confirm\") {\r\n        return this.$message.info('取消了删除！')\r\n      }\r\n      const { data: res } = await this.$http.delete(`roles/${role.id}/rights/${rightId}`)\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('删除权限失败！')\r\n      }\r\n      // this.getRolesList()\r\n      role.children = res.data\r\n    },\r\n    // 展示分配权限的对话框\r\n    async showSetRightDialog(role) {\r\n      this.roleId = role.id\r\n      // 获取所有权限的数据\r\n      const { data: res } = await this.$http.get('rights/tree')\r\n\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('获取权限数据失败!')\r\n      }\r\n\r\n      this.rightslist = res.data\r\n      // console.log(this.rightslist);\r\n\r\n      // 递归获取三级节点的Id\r\n      this.getLeafKeys(role, this.defKeys)\r\n\r\n      // 显示弹出框\r\n      this.setRightDialogVisible = true\r\n    },\r\n    // 通过递归的形式,获取角色下所有三级权限的id,并保存到 defKeys 数组中\r\n    getLeafKeys(node, arr) {\r\n      // 如果当前 node 节点不包含 children 属性,则是三级节点\r\n      if(!node.children) {\r\n        return arr.push(node.id)\r\n      }\r\n      node.children.forEach(item => {\r\n        this.getLeafKeys(item, arr)\r\n      })\r\n    },\r\n    // 监听分配权限对话框的关闭事件\r\n    setRightDialogClosed() {\r\n      this.defKeys = []\r\n    },\r\n    // 点击为角色分配权限\r\n    async allotRights() {\r\n      const keys = [\r\n        ...this.$refs.treeRef.getCheckedKeys(),\r\n        ...this.$refs.treeRef.getHalfCheckedKeys(),\r\n      ]\r\n      // console.log(keys);\r\n      const idStr = keys.join(',')\r\n\r\n      const { data: res} = await this.$http.post(`roles/${this.roleId}/rights`, { rids: idStr })\r\n      if(res.meta.status !== 200) {\r\n        return this.$message.error('分配权限失败!')\r\n      }\r\n      this.$message.success('分配权限成功!')\r\n      this.getRolesList()\r\n      this.setRightDialogVisible = false\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-tag {\r\n  margin: 7px;\r\n}\r\n.bdtop {\r\n  border-top: 1px solid #eee;\r\n}\r\n.bdbottom {\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.vcenter {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Roles.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Roles.vue?vue&type=template&id=795cab72&scoped=true&\"\nimport script from \"./Roles.vue?vue&type=script&lang=js&\"\nexport * from \"./Roles.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Roles.vue?vue&type=style&index=0&id=795cab72&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"795cab72\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","addDialogVisible","_v","rolelist","scopedSlots","_u","key","fn","scope","_l","row","item1","i1","id","class","removeRightById","_s","authName","staticClass","item2","i2","item3","showEditDialog","rolesdelete","showSetRightDialog","addDislogClosed","ref","addRolesForm","addFormRules","model","value","callback","$$v","$set","expression","slot","addRolesUser","editDialogVisible","editRolesForm","editFormRules","editFormInfo","setRightDialogVisible","setRightDialogClosed","rightslist","treeProps","defKeys","allotRights","staticRenderFns","_arrayLikeToArray","arr","len","length","i","arr2","Array","_arrayWithoutHoles","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","_defineProperty","obj","defineProperty","enumerable","configurable","writable","data","rightsList","roleName","required","message","trigger","min","max","triggetr","roleDesc","SetRightDialogVisible","children","label","rolesId","created","methods","getRolesList","res","valid","console","confirmButtonText","cancelButtonText","type","catch","confirmRusult","put","then","role","rightId","confirmResult","getLeafKeys","node","keys","idStr","rids","component"],"sourceRoot":""}