{"version":3,"file":"static/js/634.d48e4487.js","mappings":"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","sources":["webpack://vue_shop/./src/components/goods/Add.vue?ff1e","webpack://vue_shop/src/components/goods/Add.vue","webpack://vue_shop/./src/components/goods/Add.vue?215e","webpack://vue_shop/./src/components/goods/Add.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Breadcrumb',{attrs:{\"name1\":\"商品管理\",\"name2\":\"添加商品\"}}),_c('el-card',[_c('el-alert',{attrs:{\"title\":\"添加商品信息\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\",\"closable\":false}}),_c('el-steps',{attrs:{\"space\":200,\"active\":_vm.activeIndex * 1,\"finish-status\":\"success\",\"align-center\":\"\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_c('el-step',{attrs:{\"title\":\"商品参数\"}}),_c('el-step',{attrs:{\"title\":\"商品属性\"}}),_c('el-step',{attrs:{\"title\":\"商品图片\"}}),_c('el-step',{attrs:{\"title\":\"商品内容\"}}),_c('el-step',{attrs:{\"title\":\"完成\"}})],1),_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-position\":\"top\",\"label-width\":\"100px\"}},[_c('el-tabs',{attrs:{\"tab-position\":'left',\"before-leave\":_vm.beforeTableLeave},on:{\"tab-click\":_vm.tabClicked},model:{value:(_vm.activeIndex),callback:function ($$v) {_vm.activeIndex=$$v},expression:\"activeIndex\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基本信息\",\"name\":\"0\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"goods_name\"}},[_c('el-input',{model:{value:(_vm.addForm.goods_name),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_name\", $$v)},expression:\"addForm.goods_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品价格\",\"prop\":\"goods_price\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.goods_price),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_price\", $$v)},expression:\"addForm.goods_price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品重量\",\"prop\":\"goods_weight\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.goods_weight),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_weight\", $$v)},expression:\"addForm.goods_weight\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品数量\",\"prop\":\"goods_number\"}},[_c('el-input',{attrs:{\"type\":\"number\"},model:{value:(_vm.addForm.goods_number),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_number\", $$v)},expression:\"addForm.goods_number\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品分类\",\"prop\":\"goods_cat\"}},[_c('el-cascader',{attrs:{\"options\":_vm.catelist,\"props\":Object.assign({}, {expandTrigger: 'hover'}, _vm.cateProps)},on:{\"change\":_vm.handleChange},model:{value:(_vm.addForm.goods_cat),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_cat\", $$v)},expression:\"addForm.goods_cat\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品参数\",\"name\":\"1\"}},_vm._l((_vm.manyTableData),function(item){return _c('el-form-item',{key:item.attr_id,attrs:{\"label\":item.attr_name}},[_c('el-checkbox-group',{model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}},_vm._l((item.attr_vals),function(cb,i){return _c('el-checkbox',{key:i,attrs:{\"label\":cb,\"border\":\"\"}})}),1)],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品属性\",\"name\":\"2\"}},_vm._l((_vm.onlyTableData),function(item){return _c('el-form-item',{key:item.attr_id,attrs:{\"label\":item.attr_name}},[_c('el-input',{model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}})],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品图片\",\"name\":\"3\"}},[_c('el-upload',{attrs:{\"action\":_vm.uploadURL,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"list-type\":\"picture\",\"headers\":_vm.headersObj,\"on-success\":_vm.handleSuccess}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品内容\",\"name\":\"4\"}},[_c('quill-editor',{ref:\"myQuillEditor\",model:{value:(_vm.addForm.goods_introduce),callback:function ($$v) {_vm.$set(_vm.addForm, \"goods_introduce\", $$v)},expression:\"addForm.goods_introduce\"}}),_c('el-button',{staticClass:\"AddBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addShop}},[_vm._v(\"添加商品\")])],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"图片预览\",\"visible\":_vm.previewDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.previewDialogVisible=$event}}},[_c('img',{staticClass:\"perviewImg\",attrs:{\"src\":_vm.previewPath,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <Breadcrumb name1=\"商品管理\" name2=\"添加商品\" />\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 提示区域 -->\r\n      <el-alert\r\n        title=\"添加商品信息\"\r\n        type=\"info\"\r\n        center\r\n        show-icon\r\n        :closable=\"false\"\r\n      >\r\n      </el-alert>\r\n      <!-- 步骤条区域 -->\r\n      <el-steps\r\n        :space=\"200\"\r\n        :active=\"activeIndex * 1\"\r\n        finish-status=\"success\"\r\n        align-center\r\n      >\r\n        <el-step title=\"基本信息\"></el-step>\r\n        <el-step title=\"商品参数\"></el-step>\r\n        <el-step title=\"商品属性\"></el-step>\r\n        <el-step title=\"商品图片\"></el-step>\r\n        <el-step title=\"商品内容\"></el-step>\r\n        <el-step title=\"完成\"></el-step>\r\n      </el-steps>\r\n\r\n      <!-- tab标签区域 -->\r\n      <el-form\r\n        :model=\"addForm\"\r\n        :rules=\"addFormRules\"\r\n        ref=\"addFormRef\"\r\n        label-position=\"top\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-tabs\r\n          :tab-position=\"'left'\"\r\n          v-model=\"activeIndex\"\r\n          :before-leave=\"beforeTableLeave\"\r\n          @tab-click=\"tabClicked\"\r\n        >\r\n          <el-tab-pane label=\"基本信息\" name=\"0\">\r\n            <el-form-item label=\"商品名称\" prop=\"goods_name\">\r\n              <el-input v-model=\"addForm.goods_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品价格\" prop=\"goods_price\">\r\n              <el-input v-model=\"addForm.goods_price\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品重量\" prop=\"goods_weight\">\r\n              <el-input v-model=\"addForm.goods_weight\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品数量\" prop=\"goods_number\">\r\n              <el-input v-model=\"addForm.goods_number\" type=\"number\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品分类\" prop=\"goods_cat\">\r\n              <el-cascader\r\n                v-model=\"addForm.goods_cat\"\r\n                :options=\"catelist\"\r\n                :props=\"{ expandTrigger: 'hover', ...cateProps }\"\r\n                @change=\"handleChange\"\r\n              ></el-cascader>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品参数\" name=\"1\">\r\n            <el-form-item\r\n              v-for=\"item in manyTableData\"\r\n              :key=\"item.attr_id\"\r\n              :label=\"item.attr_name\"\r\n            >\r\n              <!-- 复选框组 -->\r\n              <el-checkbox-group v-model=\"item.attr_vals\">\r\n                <el-checkbox\r\n                  :label=\"cb\"\r\n                  v-for=\"(cb, i) in item.attr_vals\"\r\n                  :key=\"i\"\r\n                  border\r\n                ></el-checkbox>\r\n              </el-checkbox-group>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品属性\" name=\"2\">\r\n            <el-form-item\r\n              v-for=\"item in onlyTableData\"\r\n              :key=\"item.attr_id\"\r\n              :label=\"item.attr_name\"\r\n            >\r\n              <el-input v-model=\"item.attr_vals\"></el-input>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品图片\" name=\"3\">\r\n            <!-- \r\n              action 表示图片要上传到的后台API地址\r\n             handlePreview 点击预览触发\r\n             handleRemove 删除图片触发\r\n             fileList 指定文件列表\r\n             list-type 指定预览组件的呈现方式\r\n             -->\r\n            <el-upload\r\n              :action=\"uploadURL\"\r\n              :on-preview=\"handlePreview\"\r\n              :on-remove=\"handleRemove\"\r\n              list-type=\"picture\"\r\n              :headers=\"headersObj\"\r\n              :on-success=\"handleSuccess\"\r\n            >\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品内容\" name=\"4\">\r\n            <!-- 富文本编辑器组件 Two-way Data-Binding -->\r\n            <quill-editor\r\n              ref=\"myQuillEditor\"\r\n              v-model=\"addForm.goods_introduce\"\r\n            />\r\n            <!--            添加按钮-->\r\n            <el-button type=\"primary\" class=\"AddBtn\" @click=\"addShop\"\r\n              >添加商品</el-button\r\n            >\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-form>\r\n    </el-card>\r\n    <!--    图片预览-->\r\n    <el-dialog\r\n      title=\"图片预览\"\r\n      :visible.sync=\"previewDialogVisible\"\r\n      width=\"50%\"\r\n    >\r\n      <img :src=\"previewPath\" alt=\"\" class=\"perviewImg\" />\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport _ from \"lodash\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      activeIndex: \"0\",\r\n      // 添加商品的表单数据对象\r\n      addForm: {\r\n        goods_name: \"\",\r\n        goods_price: 0,\r\n        goods_weight: 0,\r\n        goods_number: 0,\r\n        // 商品所属的分类数组\r\n        goods_cat: [],\r\n        // 图片的数组\r\n        pics: [],\r\n        // 商品的详情描述\r\n        goods_introduce: \"\",\r\n        attrs: [],\r\n      },\r\n      // 添加商品表单的验证规则对象\r\n      addFormRules: {\r\n        goods_name: [\r\n          { required: true, message: \"请输入商品名称\", trigger: \"blur\" },\r\n        ],\r\n        goods_price: [\r\n          { required: true, message: \"请输入商品价格\", trigger: \"blur\" },\r\n        ],\r\n        goods_weight: [\r\n          { required: true, message: \"请输入商品重量\", trigger: \"blur\" },\r\n        ],\r\n        goods_number: [\r\n          { required: true, message: \"请输入商品数量\", trigger: \"blur\" },\r\n        ],\r\n        goods_cat: [\r\n          { required: true, message: \"请输入商品分类\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      // 商品分类列表\r\n      catelist: [],\r\n      cateProps: {\r\n        label: \"cat_name\",\r\n        value: \"cat_id\",\r\n        children: \"children\",\r\n      },\r\n      // 动态参数列表数据\r\n      manyTableData: [],\r\n      // 静态属性列表数据\r\n      onlyTableData: [],\r\n      // 上传图片的URL地址\r\n      uploadURL: `http://192.168.43.144:8888/api/private/v1/upload`,\r\n      // 图片上传组件的headers请求头对象\r\n      headersObj: {\r\n        Authorization: window.sessionStorage.getItem(\"token\"),\r\n      },\r\n      // 预览图片的路径\r\n      previewPath: \"\",\r\n      // 图片预览的对话框\r\n      previewDialogVisible: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.getCateList();\r\n  },\r\n  methods: {\r\n    // 获取所有商品分类数据\r\n    async getCateList() {\r\n      const { data: res } = await this.$http.get(\"Categories\");\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取商品分类数据失败！\");\r\n      }\r\n      this.catelist = res.data;\r\n      // console.log(this.catelist);\r\n    },\r\n    // 级联选择器选中项变化会触发这个函数\r\n    handleChange() {\r\n      if (this.addForm.goods_cat.length !== 3) {\r\n        this.addForm.goods_cat = [];\r\n      }\r\n    },\r\n    beforeTableLeave(activeName, oldActiveName) {\r\n      if (oldActiveName === \"0\" && this.addForm.goods_cat.length !== 3) {\r\n        this.$message.error(\"请先选中分类！\");\r\n        return false;\r\n      }\r\n    },\r\n    async tabClicked() {\r\n      // 证明访问的是动态参数面板\r\n      if (this.activeIndex === \"1\") {\r\n        const { data: res } = await this.$http.get(\r\n          `categories/${this.cateId}/attributes`,\r\n          {\r\n            params: { sel: \"many\" },\r\n          }\r\n        );\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error(\"获取动态参数列表失败！\");\r\n        }\r\n        // console.log(res.data);\r\n        res.data.forEach((item) => {\r\n          item.attr_vals =\r\n            item.attr_vals.length === 0 ? [] : item.attr_vals.split(\" \");\r\n        });\r\n        this.manyTableData = res.data;\r\n      } else if (this.activeIndex === \"2\") {\r\n        const { data: res } = await this.$http.get(\r\n          `categories/${this.cateId}/attributes`,\r\n          {\r\n            params: { sel: \"only\" },\r\n          }\r\n        );\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error(\"获取动态参数列表失败！\");\r\n        }\r\n        // console.log(res.data);\r\n        this.onlyTableData = res.data;\r\n      }\r\n    },\r\n    // 处理图片预览效果\r\n    handlePreview(file) {\r\n      this.previewPath = file.response.data.url.replace(\r\n        \"http://127.0.0.1\",\r\n        \"http://192.168.43.144\"\r\n      );\r\n      this.previewDialogVisible = true;\r\n      console.log(\"预览图片\", file.response.data.url);\r\n    },\r\n    // 处理移除图片的操作\r\n    handleRemove(file) {\r\n      // 1. 获取将要删除的图片的临时路径\r\n      const filePath = file.response.data.tmp_path;\r\n      // 2. 从 pics 数组中找到这个图片的对应的索引值\r\n      const index = this.addForm.pics.findIndex((x) => x.pic === filePath);\r\n      // 3. 调用数组的splice方法,把图片信息对象,从pics数组中移除\r\n      this.addForm.pics.splice(index, 1);\r\n      console.log(\"移除图片\", file, this.addForm);\r\n    },\r\n    // 监听图片上传成功的事件\r\n    handleSuccess(resposne) {\r\n      // 1. 拼接得到一个图片信息对象\r\n      const picInfo = { pic: resposne.data.tmp_path };\r\n      // 2. 将图片信息对象,push到pics数组中\r\n      this.addForm.pics.push(picInfo);\r\n      // console.log(resposne)\r\n      // console.log(this.addForm)\r\n    },\r\n    addShop() {\r\n      this.$refs.addFormRef.validate(async (valid) => {\r\n        if (!valid) {\r\n          return this.$message.error(\"请填写必要的表单项\");\r\n        }\r\n        // 执行添加的业务逻辑\r\n        const form = _.cloneDeep(this.addForm);\r\n        form.goods_cat = form.goods_cat.join(\",\");\r\n        // 处理动态参数\r\n        this.manyTableData.forEach((item) => {\r\n          const newInfo = {\r\n            attr_id: item.attr_id,\r\n            attr_vals: item.attr_vals.join(\" \"),\r\n          };\r\n          this.addForm.attrs.push(newInfo);\r\n        });\r\n        // 处理静态参数\r\n        this.onlyTableData.forEach((item) => {\r\n          const newInfo = { attr_id: item.attr_id, attr_vals: item.attr_vals };\r\n          this.addForm.attrs.push(newInfo);\r\n        });\r\n        form.attrs = this.addForm.attrs;\r\n        // console.log(form)\r\n        // 发起请求添加商品数据\r\n        // 商品的名称必须是唯一的\r\n        const { data: res } = await this.$http.post(\"goods\", form);\r\n        // console.log(res);\r\n        if (res.meta.status !== 201) {\r\n          return this.$message.error(\"添加商品失败!\");\r\n        }\r\n        this.$message.success(\"添加商品成功!\");\r\n        this.$router.push(\"/goods\");\r\n        // 不能直接做转换因为在 级联选择器 中双向绑定了 goods_cat 作为key\r\n        // this.addForm.goods_cat = this.addForm.goods_cat.join(',')\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    cateId() {\r\n      if (this.addForm.goods_cat.length === 3) {\r\n        return this.addForm.goods_cat[2];\r\n      }\r\n      return null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-checkbox {\r\n  margin: 0 10px 0 0 !important;\r\n}\r\n.perviewImg {\r\n  width: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Add.vue?vue&type=template&id=a2973ee6&scoped=true&\"\nimport script from \"./Add.vue?vue&type=script&lang=js&\"\nexport * from \"./Add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Add.vue?vue&type=style&index=0&id=a2973ee6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a2973ee6\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","activeIndex","ref","addForm","addFormRules","beforeTableLeave","on","tabClicked","model","value","callback","$$v","expression","$set","catelist","Object","assign","expandTrigger","cateProps","handleChange","_l","item","key","attr_id","attr_name","cb","i","uploadURL","handlePreview","handleRemove","headersObj","handleSuccess","_v","staticClass","addShop","previewDialogVisible","$event","previewPath","staticRenderFns","data","goods_name","goods_price","goods_weight","goods_number","goods_cat","pics","goods_introduce","required","message","trigger","label","children","manyTableData","onlyTableData","Authorization","created","methods","params","sel","res","console","pic","form","attr_vals","computed","cateId","component"],"sourceRoot":""}