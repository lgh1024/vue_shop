{"version":3,"file":"static/js/137-legacy.2688c9dd.js","mappings":"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","sources":["webpack://vue_shop/./src/components/goods/Cate.vue?6f1b","webpack://vue_shop/src/components/goods/Cate.vue","webpack://vue_shop/./src/components/goods/Cate.vue?4ecb","webpack://vue_shop/./src/components/goods/Cate.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Breadcrumb',{attrs:{\"name1\":\"商品管理\",\"name2\":\"商品分类\"}}),_c('el-card',[_c('el-row',[_c('el-col',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.showAddCateDialog}},[_vm._v(\"添加分类\")])],1)],1),_c('tree-table',{staticClass:\"treetable\",attrs:{\"data\":_vm.catelist,\"expand-type\":false,\"selection-type\":false,\"show-index\":\"\",\"index-text\":\"#\",\"stripe\":\"\",\"border\":\"\",\"show-row-hover\":false,\"columns\":_vm.columns},scopedSlots:_vm._u([{key:\"isok\",fn:function(scope){return [(scope.row.cat_deleted === false)?_c('i',{staticClass:\"el-icon-success\",staticStyle:{\"color\":\"lightgreen\"}}):_c('i',{staticClass:\"el-icon-error\",staticStyle:{\"color\":\"red\"}})]}},{key:\"order\",fn:function(scope){return [(scope.row.cat_level === 0)?_c('el-tag',{attrs:{\"size\":\"mini\"}},[_vm._v(\"一级\")]):(scope.row.cat_level === 1)?_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"success\"}},[_vm._v(\"二级\")]):_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"warning\"}},[_vm._v(\"三级\")])]}},{key:\"opt\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showeditCateDialog(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeCate(scope.row.cat_id)}}},[_vm._v(\"删除\")])]}}])}),_c('el-pagination',{attrs:{\"current-page\":_vm.querInfo.pagenum,\"page-sizes\":[3, 5, 10, 15],\"page-size\":_vm.querInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加分类\",\"visible\":_vm.addCateDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addCateDialogVisible=$event},\"close\":_vm.addCateDialogClosed}},[_c('el-form',{ref:\"addCateFormRef\",attrs:{\"model\":_vm.addCateForm,\"rules\":_vm.addCateFormRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称：\",\"prop\":\"cat_name\"}},[_c('el-input',{model:{value:(_vm.addCateForm.cat_name),callback:function ($$v) {_vm.$set(_vm.addCateForm, \"cat_name\", $$v)},expression:\"addCateForm.cat_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"父级分类：\"}},[_c('el-cascader',{attrs:{\"options\":_vm.parentCateList,\"props\":Object.assign({}, {expandTrigger: 'hover'},\n            _vm.cascaderProps,\n            {checkStrictly: 'true'}),\"clearable\":\"\"},on:{\"change\":_vm.parentCateChanged},model:{value:(_vm.selectdKeys),callback:function ($$v) {_vm.selectdKeys=$$v},expression:\"selectdKeys\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addCateDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addCate}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改分类\",\"visible\":_vm.editCateDialogVisbel,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editCateDialogVisbel=$event}}},[_c('el-form',{ref:\"editCateRef\",attrs:{\"model\":_vm.editCate,\"rules\":_vm.editCateRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"cat_name\"}},[_c('el-input',{model:{value:(_vm.editCate.cat_name),callback:function ($$v) {_vm.$set(_vm.editCate, \"cat_name\", $$v)},expression:\"editCate.cat_name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editCateDialogVisbel = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editCateInfo}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <Breadcrumb name1=\"商品管理\" name2=\"商品分类\" />\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <el-row>\r\n        <el-col>\r\n          <el-button type=\"primary\" @click=\"showAddCateDialog\"\r\n            >添加分类</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 表格 -->\r\n      <!-- 表格 -->\r\n      <tree-table\r\n        :data=\"catelist\"\r\n        :expand-type=\"false\"\r\n        :selection-type=\"false\"\r\n        show-index\r\n        class=\"treetable\"\r\n        index-text=\"#\"\r\n        stripe\r\n        border\r\n        :show-row-hover=\"false\"\r\n        :columns=\"columns\"\r\n      >\r\n        <!-- 是否有效 -->\r\n        <!-- <template slot='isok' v-slot=\"scope\"> -->\r\n        <template v-slot:isok=\"scope\">\r\n          <i\r\n            class=\"el-icon-success\"\r\n            v-if=\"scope.row.cat_deleted === false\"\r\n            style=\"color: lightgreen\"\r\n          ></i>\r\n          <i class=\"el-icon-error\" style=\"color: red\" v-else></i>\r\n        </template>\r\n        <!-- 排序 -->\r\n        <template v-slot:order=\"scope\">\r\n          <el-tag size=\"mini\" v-if=\"scope.row.cat_level === 0\">一级</el-tag>\r\n          <el-tag\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            v-else-if=\"scope.row.cat_level === 1\"\r\n            >二级</el-tag\r\n          >\r\n          <el-tag size=\"mini\" type=\"warning\" v-else>三级</el-tag>\r\n        </template>\r\n        <!-- 操作 -->\r\n        <template v-slot:opt=\"scope\">\r\n          <el-button\r\n            type=\"primary\"\r\n            @click=\"showeditCateDialog(scope.row)\"\r\n            icon=\"el-icon-edit\"\r\n            size=\"mini\"\r\n            >编辑</el-button\r\n          >\r\n          <el-button\r\n            type=\"danger\"\r\n            @click=\"removeCate(scope.row.cat_id)\"\r\n            icon=\"el-icon-delete\"\r\n            size=\"mini\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </tree-table>\r\n\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"querInfo.pagenum\"\r\n        :page-sizes=\"[3, 5, 10, 15]\"\r\n        :page-size=\"querInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n\r\n    <!-- 添加分类的对话框 -->\r\n    <el-dialog\r\n      title=\"添加分类\"\r\n      :visible.sync=\"addCateDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"addCateDialogClosed\"\r\n    >\r\n      <!-- 添加分类的表单 -->\r\n      <el-form\r\n        :model=\"addCateForm\"\r\n        :rules=\"addCateFormRules\"\r\n        ref=\"addCateFormRef\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"分类名称：\" prop=\"cat_name\">\r\n          <el-input v-model=\"addCateForm.cat_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"父级分类：\">\r\n          <!-- options 用来指定数据源 -->\r\n          <!-- props 用来指定配置对象 -->\r\n          <el-cascader\r\n            v-model=\"selectdKeys\"\r\n            :options=\"parentCateList\"\r\n            :props=\"{\r\n              expandTrigger: 'hover',\r\n              ...cascaderProps,\r\n              checkStrictly: 'true',\r\n            }\"\r\n            @change=\"parentCateChanged\"\r\n            clearable\r\n          >\r\n          </el-cascader>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addCateDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addCate\"\r\n          >确 定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 编辑分类信息 -->\r\n    <el-dialog title=\"修改分类\" :visible.sync=\"editCateDialogVisbel\" width=\"50%\">\r\n      <el-form :model=\"editCate\" :rules=\"editCateRules\" ref=\"editCateRef\" label-width=\"100px\">\r\n        <el-form-item label=\"分类名称\" prop=\"cat_name\">\r\n          <el-input v-model=\"editCate.cat_name\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editCateDialogVisbel = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editCateInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 查询条件\r\n      querInfo: {\r\n        type: 3,\r\n        pagenum: 1,\r\n        pagesize: 5,\r\n      },\r\n      // 商品分类的数据列表\r\n      catelist: [],\r\n      // 总数据条数\r\n      total: 0,\r\n      // 为table指定列的定义\r\n      columns: [\r\n        {\r\n          label: \"分类名称\",\r\n          prop: \"cat_name\",\r\n        },\r\n        {\r\n          label: \"是否有效\",\r\n          // 表示将当前列定义为模板列\r\n          type: \"template\",\r\n          // 表示当前这一列使用模板名称\r\n          template: \"isok\",\r\n        },\r\n        {\r\n          label: \"排序\",\r\n          // 表示将当前列定义为模板列\r\n          type: \"template\",\r\n          // 表示当前这一列使用模板名称\r\n          template: \"order\",\r\n        },\r\n        {\r\n          label: \"操作\",\r\n          // 表示将当前列定义为模板列\r\n          type: \"template\",\r\n          // 表示当前这一列使用模板名称\r\n          template: \"opt\",\r\n        },\r\n      ],\r\n      // 控制添加分类对话框的显示与隐藏\r\n      addCateDialogVisible: false,\r\n      // 添加分类的表单数据对象\r\n      addCateForm: {\r\n        // 将要添加的分类的名称\r\n        cat_name: \"\",\r\n        // 父级分类的Id\r\n        cat_pid: 0,\r\n        // 分类的等级，默认要添加的是1级分类\r\n        cat_level: 0,\r\n      },\r\n      // 添加分类表单的验证规则对象\r\n      addCateFormRules: {\r\n        cat_name: [\r\n          { required: true, message: \"请输入分类名称\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      // 父级分类的列表\r\n      parentCateList: [],\r\n      // 指定级联选择器的配置对象\r\n      cascaderProps: {\r\n        value: 'cat_id',\r\n        label: 'cat_name',\r\n        children: 'children'\r\n      },\r\n      // 选中的父级分类的id数组\r\n      selectdKeys: [],\r\n      // 编辑对话框的显示和隐藏\r\n      editCateDialogVisbel: false,\r\n      editCate: {},\r\n      editCateRules: {\r\n        cat_name: [{ required: true, message: '请输入要修改的信息', trigger: 'blur' }]\r\n      },\r\n      editCateId: ''\r\n    };\r\n  },\r\n  created() {\r\n    this.getCateList();\r\n  },\r\n  methods: {\r\n    // 获取商品分类数据\r\n    async getCateList() {\r\n      const { data: res } = await this.$http.get(\"categories\", {\r\n        params: this.querInfo,\r\n      });\r\n      // console.log(res.data);\r\n      this.catelist = res.data.result;\r\n      this.total = res.data.total;\r\n      // console.log(this.catelist);\r\n    },\r\n    // 监听 pagesize 改变\r\n    handleSizeChange(newSize) {\r\n      this.querInfo.pagesize = newSize;\r\n      this.getCateList();\r\n    },\r\n    // 监听 pagenum 改变\r\n    handleCurrentChange(newPage) {\r\n      this.querInfo.pagenum = newPage;\r\n      this.getCateList();\r\n    },\r\n    // 点击按钮，展示添加分类的对话框\r\n    showAddCateDialog() {\r\n      // 先获取父级分类的数据列表\r\n      this.getParentCateList();\r\n      // 展示对话框\r\n      this.addCateDialogVisible = true;\r\n    },\r\n    // 获取父级分类的数据列表\r\n    async getParentCateList() {\r\n      const { data: res } = await this.$http.get(\"categories\", {\r\n        params: { type: 2 },\r\n      });\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取父级分类数据失败！\");\r\n      }\r\n      // console.log(res.data);\r\n      this.parentCateList = res.data;\r\n    },\r\n    // 选择项发生变化触发这个事件\r\n    parentCateChanged() {\r\n      // 如果 selectdKeys 数组中的length大于0证明选中父级分类\r\n      // 反之,就说明没有选中任何父级分类\r\n      if (this.selectdKeys.length > 0) {\r\n        // 父级分类的id\r\n        this.addCateForm.cat_pid = this.selectdKeys[this.selectdKeys.length - 1]\r\n        // 为当前分类的等级赋值\r\n        this.addCateForm.cat_level = this.selectdKeys.length\r\n        return\r\n      } else {\r\n        // 父级分类的id\r\n        this.addCateForm.cat_pid = 0\r\n        // 为当前分类的等级赋值\r\n        this.addCateForm.cat_level = 0\r\n      }\r\n    },\r\n    // 点击按钮添加新的分类\r\n    addCate() {\r\n      this.$refs.addCateFormRef.validate(async valid => {\r\n        if(!valid) return \r\n        const { data: res } = await this.$http.post('categories', this.addCateForm)\r\n        if(res.meta.status !== 201) {\r\n          return $message.error('添加分类失败！')\r\n        }\r\n        this.$message.success('添加分类成功！')\r\n        this.getCateList()\r\n        this.addCateDialogVisible = false\r\n      })\r\n    },\r\n    // 监听对话框的关闭事件，重置表单数据\r\n    addCateDialogClosed() {\r\n      this.$refs.addCateFormRef.resetFields()\r\n      this.selectdKeys = []\r\n      this.addCateForm.cat_level = 0\r\n      this.addCateForm.cat_pid = 0\r\n    },\r\n    async showeditCateDialog(cateInfo) {\r\n      this.editCateId = cateInfo.cat_id\r\n      const { data: res } = await this.$http.get('categories/' + cateInfo.cat_id)\r\n      this.editCate = res.data\r\n      // console.log(this.editCate)\r\n      // console.log(res.data)\r\n      this.editCateDialogVisbel = true\r\n    },\r\n    // 编辑分类信息\r\n    async editCateInfo() {\r\n      const { data: res } = await this.$http.put('categories/' + this.editCate.cat_id, { cat_name: this.editCate.cat_name })\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('更新分类数据失败!')\r\n      }\r\n      this.$message.success('更新分类数据成功!')\r\n      this.getCateList()\r\n      this.editCateDialogVisbel = false\r\n      // console.log(res)\r\n    },\r\n    // 删除分类\r\n    async removeCate(id) {\r\n      const confirRustle = await this.$confirm('此操作将永久删除该文件, 是否继续?', '删除分类', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n\r\n      if (confirRustle !== 'confirm') {\r\n        return this.$message.info('已取消删除操作!')\r\n      }\r\n\r\n      const { data: res } = await this.$http.delete('categories/' + id)\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error('分类删除失败!')\r\n      }\r\n      this.$message.success('该分类已经成功删除!')\r\n      this.getCateList()\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.treetable {\r\n  margin-top: 15px;\r\n}\r\n.el-cascader {\r\n  width: 100%;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Cate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cate.vue?vue&type=template&id=7b65d1ab&scoped=true&\"\nimport script from \"./Cate.vue?vue&type=script&lang=js&\"\nexport * from \"./Cate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cate.vue?vue&type=style&index=0&id=7b65d1ab&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b65d1ab\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","showAddCateDialog","_v","staticClass","catelist","columns","scopedSlots","_u","key","fn","scope","row","cat_deleted","staticStyle","cat_level","$event","showeditCateDialog","removeCate","cat_id","querInfo","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addCateDialogVisible","addCateDialogClosed","ref","addCateForm","addCateFormRules","model","value","callback","$$v","$set","expression","parentCateList","Object","assign","expandTrigger","cascaderProps","checkStrictly","parentCateChanged","selectdKeys","slot","addCate","editCateDialogVisbel","editCate","editCateRules","editCateInfo","staticRenderFns","data","type","label","prop","template","cat_name","cat_pid","required","message","trigger","children","editCateId","created","methods","getCateList","params","res","newSize","newPage","getParentCateList","valid","$message","cateInfo","id","confirmButtonText","cancelButtonText","catch","confirRustle","component"],"sourceRoot":""}