{"version":3,"file":"static/js/269-legacy.c3a6525e.js","mappings":"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","sources":["webpack://vue_shop/./src/components/user/Users.vue?0b98","webpack://vue_shop/src/components/user/Users.vue","webpack://vue_shop/./src/components/user/Users.vue?768c","webpack://vue_shop/./src/components/user/Users.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Breadcrumb',{attrs:{\"name1\":\"用户管理\",\"name2\":\"用户列表\"}}),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加用户 \")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.userData.userList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"role_name\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStateChanged(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeUserById(scope.row.id)}}}),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top\",\"enterable\":false}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRoles(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-size\":_vm.queryInfo.pagesize,\"page-sizes\":[2, 5, 10, 20],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.userData.total},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.addForm,\"rules\":_vm.addFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addForm.username),callback:function ($$v) {_vm.$set(_vm.addForm, \"username\", $$v)},expression:\"addForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addForm.password),callback:function ($$v) {_vm.$set(_vm.addForm, \"password\", $$v)},expression:\"addForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addForm.email),callback:function ($$v) {_vm.$set(_vm.addForm, \"email\", $$v)},expression:\"addForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addForm.mobile),callback:function ($$v) {_vm.$set(_vm.addForm, \"mobile\", $$v)},expression:\"addForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editDialogClosed}},[_c('el-form',{ref:\"editFormRef\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editForm.username),callback:function ($$v) {_vm.$set(_vm.editForm, \"username\", $$v)},expression:\"editForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editForm.email),callback:function ($$v) {_vm.$set(_vm.editForm, \"email\", $$v)},expression:\"editForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editForm.mobile),callback:function ($$v) {_vm.$set(_vm.editForm, \"mobile\", $$v)},expression:\"editForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUserInfo}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.setRoleDialogClose}},[_c('div',[_c('p',[_vm._v(\"当前的用户: \"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色: \"+_vm._s(_vm.userInfo.role_name))]),_c('p',[_vm._v(\" 分配新角色: \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.selectedRoleId),callback:function ($$v) {_vm.selectedRoleId=$$v},expression:\"selectedRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.roleName,\"value\":item.id}})}),1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航区 -->\r\n    <Breadcrumb name1=\"用户管理\" name2=\"用户列表\" />\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <!-- 搜索与添加区域 -->\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"8\">\r\n          <el-input\r\n              placeholder=\"请输入内容\"\r\n              v-model=\"queryInfo.query\"\r\n              clearable\r\n              @clear=\"getUserList\"\r\n          >\r\n            <el-button\r\n                slot=\"append\"\r\n                icon=\"el-icon-search\"\r\n                @click=\"getUserList\"\r\n            ></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"addDialogVisible = true\"\r\n          >添加用户\r\n          </el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 用户列表区域 -->\r\n      <el-table :data=\"userData.userList\" border stripe>\r\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column prop=\"mobile\" label=\"电话\"></el-table-column>\r\n        <el-table-column prop=\"role_name\" label=\"角色\"></el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <template v-slot=\"scope\">\r\n            <el-switch\r\n                v-model=\"scope.row.mg_state\"\r\n                @change=\"userStateChanged(scope.row)\"\r\n            ></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180px\">\r\n          <template v-slot=\"scope\">\r\n            <!-- 修改按钮 -->\r\n            <el-button\r\n                type=\"primary\"\r\n                icon=\"el-icon-edit\"\r\n                size=\"mini\"\r\n                @click=\"showEditDialog(scope.row.id)\"\r\n            ></el-button>\r\n            <!-- 删除按钮 -->\r\n            <el-button\r\n                type=\"danger\"\r\n                icon=\"el-icon-delete\"\r\n                size=\"mini\"\r\n                @click=\"removeUserById(scope.row.id)\"\r\n            ></el-button>\r\n            <!-- 分配角色按钮 -->\r\n            <el-tooltip\r\n                effect=\"dark\"\r\n                content=\"分配角色\"\r\n                placement=\"top\"\r\n                :enterable=\"false\"\r\n            >\r\n              <el-button\r\n                  type=\"warning\"\r\n                  icon=\"el-icon-setting\"\r\n                  size=\"mini\"\r\n                  @click=\"setRoles(scope.row)\"\r\n              ></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"queryInfo.pagenum\"\r\n          @size-change=\"handleSizeChange\"\r\n          :page-size=\"queryInfo.pagesize\"\r\n          :page-sizes=\"[2, 5, 10, 20]\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"userData.total\"\r\n      >\r\n      </el-pagination>\r\n    </el-card>\r\n\r\n    <!-- 添加用户的对话框 -->\r\n    <el-dialog\r\n        title=\"添加用户\"\r\n        :visible.sync=\"addDialogVisible\"\r\n        width=\"50%\"\r\n        @close=\"addDialogClosed\"\r\n    >\r\n      <!-- 内容主体区域 -->\r\n      <el-form\r\n          :model=\"addForm\"\r\n          :rules=\"addFormRules\"\r\n          ref=\"addFormRef\"\r\n          label-width=\"70px\"\r\n      >\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <!-- 底部区域 -->\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 修改用户的对话框 -->\r\n    <el-dialog\r\n        title=\"提示\"\r\n        :visible.sync=\"editDialogVisible\"\r\n        @close=\"editDialogClosed\"\r\n        width=\"50%\"\r\n    >\r\n      <el-form\r\n          ref=\"editFormRef\"\r\n          :model=\"editForm\"\r\n          :rules=\"editFormRules\"\r\n          label-width=\"70px\"\r\n      >\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUserInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配权限的对话框 -->\r\n    <el-dialog title=\"提示\" :visible.sync=\"setRoleDialogVisible\" width=\"50%\" @close=\"setRoleDialogClose\">\r\n      <div>\r\n        <p>当前的用户: {{ userInfo.username }}</p>\r\n        <p>当前的角色: {{ userInfo.role_name }}</p>\r\n        <p>\r\n          分配新角色:\r\n          <el-select v-model=\"selectedRoleId\" placeholder=\"请选择\">\r\n            <el-option\r\n                v-for=\"item in rolesList\"\r\n                :key=\"item.id\"\r\n                :label=\"item.roleName\"\r\n                :value=\"item.id\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRoleInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    // 验证邮箱的规则\r\n    let checkEmail = (rule, value, cb) => {\r\n      // 验证邮箱的正则表达式\r\n      const regEmail = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/;\r\n      if (regEmail.test(value)) {\r\n        // 合法的邮箱\r\n        return cb();\r\n      }\r\n      cb(new Error(\"请输入合法的邮箱\"));\r\n    };\r\n    // 验证手机号的规则\r\n    let checkMobile = (rule, value, cb) => {\r\n      // 验证手机号的正则表达式\r\n      // const regMobile = /^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;\r\n      const regMobile = /^1[34578]\\d{9}$/;\r\n      if (regMobile.test(value)) {\r\n        // 合法的手机号\r\n        return cb();\r\n      }\r\n      cb(new Error(\"请输入合法的手机号\"));\r\n    };\r\n    return {\r\n      // 获取用户列表的参数对象\r\n      queryInfo: {\r\n        query: \"\",\r\n        // 当前的页数\r\n        pagenum: 1,\r\n        // 当前每页显示多少条数据\r\n        pagesize: 5,\r\n      },\r\n      // 存放用户的数据和数量\r\n      userData: {\r\n        userList: [],\r\n        total: 0,\r\n      },\r\n      // 控制用户对话框的显示与隐藏\r\n      addDialogVisible: false,\r\n      // 添加用户数据的对象\r\n      addForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        mobile: \"\",\r\n      },\r\n      // 添加表示的验证规则对象\r\n      addFormRules: {\r\n        username: [\r\n          {required: true, message: \"请输入用户名\", trigger: \"blur\"},\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: \"密码的长度在2~10个字符之间\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        password: [\r\n          {required: true, message: \"请输入用户名\", trigger: \"blur\"},\r\n          {\r\n            min: 6,\r\n            max: 15,\r\n            message: \"密码的长度在6~15个字符之间\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        email: [\r\n          {required: true, message: \"请输入邮箱\", trigger: \"blur\"},\r\n          {validator: checkEmail, trigger: \"blur\"},\r\n        ],\r\n        mobile: [\r\n          {required: true, message: \"请输入手机\", trigger: \"blur\"},\r\n          {validator: checkMobile, trigger: \"blur\"},\r\n        ],\r\n      },\r\n      // 控制修改对话框的显示和隐藏\r\n      editDialogVisible: false,\r\n      // 查询到的用户信息对象\r\n      editForm: {},\r\n      // 修改表单的验证规则\r\n      editFormRules: {\r\n        email: [\r\n          {required: true, message: \"请输入邮箱\", trigger: \"blur\"},\r\n          {validator: checkEmail, trigger: \"blur\"},\r\n        ],\r\n        mobile: [\r\n          {required: true, message: \"请输入手机\", trigger: \"blur\"},\r\n          {validator: checkMobile, trigger: \"blur\"},\r\n        ],\r\n      },\r\n      // 控制分配角色对话框的显示与隐藏\r\n      setRoleDialogVisible: false,\r\n      // 需要被分配角色的用户信息\r\n      userInfo: {},\r\n      // 所有角色的数据列表\r\n      rolesList: [],\r\n      // 已选择的id值\r\n      selectedRoleId: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.getUserList();\r\n  },\r\n  methods: {\r\n    async getUserList() {\r\n      const {data: res} = await this.$http.get(\"users\", {\r\n        params: this.queryInfo,\r\n      });\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取用户列表失败！\");\r\n      }\r\n      this.userData.userList = res.data.users;\r\n      this.userData.total = res.data.total;\r\n      // console.log(res);\r\n    },\r\n    // 监听 pagesize 改变的事件\r\n    handleSizeChange(newSize) {\r\n      // console.log(newSize);\r\n      this.queryInfo.pagesize = newSize;\r\n      this.getUserList();\r\n    }, // 监听 页码值改变的事件\r\n    handleCurrentChange(newPage) {\r\n      // console.log(newPage);\r\n      this.queryInfo.pagenum = newPage;\r\n      this.getUserList();\r\n    },\r\n    // 监听 Switch 状态的改变\r\n    async userStateChanged(userInfo) {\r\n      const {data: res} = await this.$http.put(\r\n          `users/${userInfo.id}/state/${userInfo.mg_state}`\r\n      );\r\n      if (res.meta.status !== 200) {\r\n        userInfo.mg_state = !userInfo.mg_state;\r\n        return this.$message.error(\"更新用户状态失败！\");\r\n      }\r\n      return this.$message.success(\"更新用户状态成功！\");\r\n    },\r\n    // 监听添加用户对话框的关闭事件\r\n    addDialogClosed() {\r\n      this.$refs.addFormRef.resetFields();\r\n    },\r\n    // 点击按钮，添加新用户\r\n    addUser() {\r\n      this.$refs.addFormRef.validate(async (valid) => {\r\n        if (!valid) return;\r\n        // 添加新用户\r\n        const {data: res} = await this.$http.post(\"users\", this.addForm);\r\n        if (res.meta.status !== 201) {\r\n          return this.$message.error(\"添加用户失败！\");\r\n        }\r\n        this.$message.success(\"添加用户成功！\");\r\n        // 隐藏添加用户的对话框\r\n        this.addDialogVisible = false;\r\n        // 添加成后重新获取用户数据,不需要用户手动刷新\r\n        this.getUserList();\r\n        return this.$message.success(\"用户添加成功了~\");\r\n      });\r\n    },\r\n    // 展示编辑用户的对话框\r\n    async showEditDialog(id) {\r\n      const {data: res} = await this.$http.get(\"users/\" + id);\r\n      // console.log(res);\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"查询用户信息失败！\");\r\n      }\r\n      this.editForm = res.data;\r\n      this.editDialogVisible = true;\r\n    },\r\n    // 监听修改用户对话框的关闭事件\r\n    editDialogClosed() {\r\n      this.$refs.editFormRef.resetFields();\r\n    },\r\n    // 修改用户信息并提交\r\n    editUserInfo() {\r\n      this.$refs.editFormRef.validate(async (valid) => {\r\n        if (!valid) return;\r\n        // 发起修改用户信息的数据请求\r\n        const {data: res} = await this.$http.put(\r\n            \"users/\" + this.editForm.id,\r\n            {\r\n              email: this.editForm.email,\r\n              mobile: this.editForm.mobile,\r\n            }\r\n        );\r\n        if (res.meta.status !== 200) {\r\n          return this.$message.error(\"更新用户信息失败！\");\r\n        }\r\n        // 关闭对话框\r\n        this.editDialogVisible = false;\r\n        // 刷新数据列表\r\n        this.getUserList();\r\n        // 提示修改成功\r\n        this.$message.success(\"更新用户信息成功！\");\r\n      });\r\n    },\r\n    // 根据id删除对应的用户信息\r\n    async removeUserById(id) {\r\n      // 弹框询问用户是否删除数据\r\n      const confimResult = await this.$confirm(\r\n          \"此操作将永久删除该用户, 是否继续?\",\r\n          \"提示\",\r\n          {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          }\r\n      ).catch(err => err);\r\n      // 如果用户确认删除，则返回值为字符串 confirm\r\n      // 如果用户取消删除，则返回值为字符串 cancel\r\n      // console.log(confimResult);\r\n      if (confimResult !== \"confirm\") {\r\n        return this.$message.info(\"已经取消了删除！\");\r\n      }\r\n      const {data: res} = await this.$http.delete(\"users/\" + id);\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"删除用户失败！\");\r\n      }\r\n      this.$message.success(\"用户删除成功！\");\r\n      this.getUserList();\r\n      // console.log(res);\r\n    },\r\n    // 展示分配角色的对话框\r\n    async setRoles(userInfo) {\r\n      this.userInfo = userInfo;\r\n\r\n      // 在展示对话框之前,获取所有角色的列表\r\n      const {data: res} = await this.$http.get(\"roles\");\r\n      if (res.meta.status !== 200) {\r\n        return this.$message.error(\"获取角色列表失败!0\");\r\n      }\r\n      this.rolesList = res.data;\r\n\r\n      this.setRoleDialogVisible = true;\r\n    },\r\n    // 点击按钮,分配角色\r\n    saveRoleInfo() {\r\n      if (!this.selectedRoleId) {\r\n        return this.$message.error(\"请选择要分配的角色!\");\r\n      }\r\n      this.$http\r\n          .put(`users/${this.userInfo.id}/role`, {rid: this.selectedRoleId})\r\n          .then((res) => {\r\n            // console.log(res);\r\n            if (res.status !== 200) {\r\n              return this.$message.error(\"更新角色失败! \");\r\n            }\r\n            this.$message.success(\"更新角色成功!\");\r\n            this.getUserList();\r\n            this.setRoleDialogVisible = false;\r\n          });\r\n    },\r\n    // 监听分配角色对话框的关闭事件\r\n    setRoleDialogClose() {\r\n      this.selectedRoleId = ''\r\n      this.userInfo = {}\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=443e65bc&scoped=true&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"443e65bc\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","getUserList","model","value","queryInfo","callback","$$v","$set","expression","slot","$event","addDialogVisible","_v","userData","userList","scopedSlots","_u","key","fn","scope","userStateChanged","row","showEditDialog","id","removeUserById","setRoles","pagenum","pagesize","total","handleCurrentChange","handleSizeChange","addDialogClosed","ref","addForm","addFormRules","staticClass","addUser","editDialogVisible","editDialogClosed","editForm","editFormRules","editUserInfo","setRoleDialogVisible","setRoleDialogClose","_s","userInfo","username","role_name","selectedRoleId","_l","item","roleName","saveRoleInfo","staticRenderFns","data","cb","query","password","email","mobile","required","message","trigger","min","max","validator","rolesList","created","methods","params","res","newSize","newPage","valid","confirmButtonText","cancelButtonText","type","catch","confimResult","put","rid","then","component"],"sourceRoot":""}